from django.db import models
from django.contrib.auth.models import User
# Create your models here.

MSG_TYPES=(('SYS_STATUS','SYS_STATUS'),
('MEMINFO','MEMINFO'),
('MISSION_CURRENT','MISSION_CURRENT'),
('GPS_RAW_INT','GPS_RAW_INT'),
('NAV_CONTROLLER_OUTPUT','NAV_CONTROLLER_OUTPUT'),
('RAW_IMU','RAW_IMU'),
('SCALED_PRESSURE','SCALED_PRESSURE'),
('SENSOR_OFFSETS','SENSOR_OFFSETS'),
('SERVO_OUTPUT_RAW','SERVO_OUTPUT_RAW'),
('RC_CHANNELS_RAW','RC_CHANNELS_RAW'),
('AHRS','AHRS'),
('HWSTATUS','HWSTATUS'),
('ATTITUDE','ATTITUDE'),
('VFR_HUD','VFR_HUD'),
('HEARTBEAT','HEARTBEAT'),
('PARAM_REQUEST_LIST','PARAM_REQUEST_LIST'),
('PARAM_VALUE','PARAM_VALUE'),
('REQUEST_DATA_STREAM','REQUEST_DATA_STREAM'),
('STATUSTEXT','STATUSTEXT'),
('GPS_STATUS','GPS_STATUS'))

##MSG_FIELD_TYPES=(
##('pitchspeed','pitchspeed'),
##('yaw','yaw'),
##('rollspeed','rollspeed'),
##('time_boot_ms','time_boot_ms'),
##('pitch','pitchspeed','pitch','pitchspeed'),
##('yaw','yaw'),
##('rollspeed','rollspeed'),
##('time_boot_ms','time_boot_ms'),
##('pitch','pitch'),
##('mavpackettype','mavpackettype'),
##('yawspeed','yawspeed'),
##('roll','roll'),
##('throttle','throttle'),
##('groundspeed','groundspeed'),
##('airspeed','airspeed'),
##('climb','climb'),
##('mavpackettype','mavpackettype'),
##('alt','alt'),
##('heading','heading'),
##('onboard_control_sensors_present','obcsp'),
##('load','load'),
##('battery_remaining','battery_remaining'),
##('errors_count4','errors_count4'),
##('drop_rate_comm','drop_rate_comm'),
##('errors_count2','errors_count2'),
##('errors_count3','errors_count3'),
##('errors_comm','errors_comm'),
##('current_battery','current_battery'),
##('errors_count1','errors_count1'),
##('onboard_control_sensors_health','obcsh'),
##('mavpackettype','mavpackettype'),
##('onboard_control_sensors_enabled','obcse'),
##('voltage_battery','voltage_battery'),
##('mavpackettype','mavpackettype'),
##('brkval','brkval'),
##('freemem','freemem'),
##('mavpackettype','mavpackettype'),
##('seq','seq'),
##('fix_type','fix_type'),
##('cog','cog'),
##('epv','epv'),
##('lon','lon'),
##('time_usec','time_usec'),
##('eph','eph'),
##('satellites_visible','satellites_visible'),
##('lat','lat'),
##('mavpackettype','mavpackettype'),
##('alt','alt'),
##('vel','vel'),
##('wp_dist','wp_dist'),
##('nav_pitch','nav_pitch'),
##('target_bearing','target_bearing'),
##('nav_roll','nav_roll'),
##('aspd_error','aspd_error'),
##('alt_error','alt_error'),
##('mavpackettype','mavpackettype'),
##('xtrack_error','xtrack_error'),
##('nav_bearing','nav_bearing'),
##('xgyro','xgyro'),
##('zmag','zmag'),
##('ygyro','ygyro'),
##('xmag','xmag'),
##('zacc','zacc'),
##('xacc','xacc'),
##('yacc','yacc'),
##('zgyro','zgyro'),
##('mavpackettype','mavpackettype'),
##('ymag','ymag'),
##('time_usec','time_usec'),
##('mavpackettype','mavpackettype'),
##('press_diff','press_diff'),
##('time_boot_ms','time_boot_ms'),
##('temperature','temperature'),
##('press_abs','press_abs'),
##('gyro_cal_z','gyro_cal_z'),
##('gyro_cal_y','gyro_cal_y'),
##('gyro_cal_x','gyro_cal_x'),
##('raw_temp','raw_temp'),
##('mag_ofs_z','mag_ofs_z'),
##('mag_ofs_x','mag_ofs_x'),
##('mag_ofs_y','mag_ofs_y'),
##('accel_cal_y','accel_cal_y'),
##('raw_press','raw_press'),
##('accel_cal_x','accel_cal_x'),
##('mag_declination','mag_declination'),
##('mavpackettype','mavpackettype'),
##('accel_cal_z','accel_cal_z'),
##('servo4_raw','servo4_raw'),
##('servo2_raw','servo2_raw'),
##('servo6_raw','servo6_raw'),
##('time_usec','time_usec'),
##('servo1_raw','servo1_raw'),
##('servo8_raw','servo8_raw'),
##('servo5_raw','servo5_raw'),
##('mavpackettype','mavpackettype'),
##('servo3_raw','servo3_raw'),
##('port','port'),
##('servo7_raw','servo7_raw'),
##('chan4_raw','chan4_raw'),
##('chan2_raw','chan2_raw'),
##('chan6_raw','chan6_raw'),
##('time_boot_ms','time_boot_ms'),
##('chan1_raw','chan1_raw'),
##('chan5_raw','chan5_raw'),
##('chan3_raw','chan3_raw'),
##('chan7_raw','chan7_raw'),
##('mavpackettype','mavpackettype'),
##('chan8_raw','chan8_raw'),
##('port','port'),
##('rssi','rssi'),
##('error_rp','error_rp'),
##('error_yaw','error_yaw'),
##('renorm_val','renorm_val'),
##('accel_weight','accel_weight'),
##('omegaIx','omegaIx'),
##('omegaIy','omegaIy'),
##('mavpackettype','mavpackettype'),
##('omegaIz','omegaIz'),
##('I2Cerr','I2Cerr'),
##('mavpackettype','mavpackettype'),
##('Vcc','Vcc'),
##('custom_mode','custom_mode'),
##('system_status','system_status'),
##('base_mode','base_mode'),
##('autopilot','autopilot'),
##('mavpackettype','mavpackettype'),
##('type','type'),
##('mavlink_version','mavlink_version'),
##('mavpackettype','mavpackettype'),
##('target_component','target_component'),
##('target_system','target_system'),
##('param_index','param_index'),
##('param_count','param_count'),
##('param_type','param_type'),
##('param_id','param_id'),
##('mavpackettype','mavpackettype'),
##('param_value','param_value'),
##('req_stream_id','req_stream_id'),
##('req_message_rate','req_message_rate'((
##('target_system','target_system'),
##('start_stop','start_stop'),
##('mavpackettype','mavpackettype'),
##('target_component','target_component'),
##('mavpackettype','mavpackettype'),
##('severity','severity'),
##('text','text'),
##('satellite_snr','satellite_snr'),
##('satellite_azimuth','satellite_azimuth'),
##('satellite_prn','satellite_prn'),
##('satellite_elevation','satellite_elevation'),
##('satellites_visible','satellites_visible'),
##('satellite_used','satellite_used'),
##('mavpackettype','mavpackettype'),
##('yawspeed','yawspeed'),
##('roll','roll'),
##('throttle','throttle'),
##('groundspeed','groundspeed'),
##('airspeed','airspeed'),
##('climb','climb'),
##('mavpackettype','mavpackettype'),
##('alt','alt'),
##('heading','heading'),
##('onboard_control_sensors_present','onboard_control_sensors_present'),
##('load','load'),
##('battery_remaining','battery_remaining'),
##('errors_count4','errors_count4'),
##('drop_rate_comm','drop_rate_comm'),
##('errors_count2','errors_count2'),
##('errors_count3','errors_count3'),
##('errors_comm','errors_comm'),
##('current_battery','current_battery'),
##('errors_count1','errors_count1'),
##('onboard_control_sensors_health','onboard_control_sensors_present'),
##('mavpackettype','mavpackettype'),
##('onboard_control_sensors_enabled','onboard_control_sensors_present'),
##('voltage_battery','voltage_battery'),
##('mavpackettype','mavpackettype'),
##('brkval','brkval'),
##('freemem','freemem'),
##('mavpackettype','mavpackettype'),
##('seq','seq'),
##('fix_type','fix_type'),
##('cog','cog'),
##('epv','epv'),
##('lon','lon'),
##('time_usec','time_usec'),
##('eph','eph'),
##('satellites_visible','satellites_visible'),
##('lat','lat'),
##('mavpackettype','mavpackettype'),
##('alt','alt'),
##('vel','vel'),
##('wp_dist','wp_dist'),
##('nav_pitch','nav_pitch'),
##('target_bearing','target_bearing'),
##('nav_roll','nav_roll'),
##('aspd_error','aspd_error'),
##('alt_error','alt_error'),
##('mavpackettype','mavpackettype'),
##('xtrack_error','xtrack_error'),
##('nav_bearing','nav_bearing'),
##('xgyro','xgyro'),
##('zmag','zmag'),
##('ygyro','ygyro'),
##('xmag','xmag'),('yaw','yaw'),
##('rollspeed','rollspeed'),
##('time_boot_ms','time_boot_ms'),
##('pitch','pitchspeed','pitch','pitchspeed'),
##('yaw','yaw'),
##('rollspeed','rollspeed'),
##('time_boot_ms','time_boot_ms'),
##('pitch','pitch'),
##('mavpackettype','mavpackettype'),
##('yawspeed','yawspeed'),
##('roll','roll'),
##('throttle','throttle'),
##('groundspeed','groundspeed'),
##('airspeed','airspeed'),
##('climb','climb'),
##('mavpackettype','mavpackettype'),
##('alt','alt'),
##('heading','heading'),
##('onboard_control_sensors_present','onboard_control_sensors_present'),
##('load','load'),
##('battery_remaining','battery_remaining'),
##('errors_count4','errors_count4'),
##('drop_rate_comm','drop_rate_comm'),
##('errors_count2','errors_count2'),
##('errors_count3','errors_count3'),
##('errors_comm','errors_comm'),
##('current_battery','current_battery'),
##('errors_count1','errors_count1'),
##('onboard_control_sensors_health','onboard_control_sensors_present'),
##('mavpackettype','mavpackettype'),
##('onboard_control_sensors_enabled','onboard_control_sensors_present'),
##('voltage_battery','voltage_battery'),
##('mavpackettype','mavpackettype'),
##('brkval','brkval'),
##('freemem','freemem'),
##('mavpackettype','mavpackettype'),
##('seq','seq'),
##('fix_type','fix_type'),
##('cog','cog'),
##('epv','epv'),
##('lon','lon'),
##('time_usec','time_usec'),
##('eph','eph'),
##('satellites_visible','satellites_visible'),
##('lat','lat'),
##('mavpackettype','mavpackettype'),
##('alt','alt'),
##('vel','vel'),
##('wp_dist','wp_dist'),
##('nav_pitch','nav_pitch'),
##('target_bearing','target_bearing'),
##('nav_roll','nav_roll'),
##('aspd_error','aspd_error'),
##('alt_error','alt_error'),
##('mavpackettype','mavpackettype'),
##('xtrack_error','xtrack_error'),
##('nav_bearing','nav_bearing'),
##('xgyro','xgyro'),
##('zmag','zmag'),
##('ygyro','ygyro'),
##('xmag','xmag'),
##('zacc','zacc'),
##('xacc','xacc'),
##('yacc','yacc'),
##('zgyro','zgyro'),
##('mavpackettype','mavpackettype'),
##('ymag','ymag'),
##('time_usec','time_usec'),
##('mavpackettype','mavpackettype'),
##('press_diff','press_diff'),
##('time_boot_ms','time_boot_ms'),
##('temperature','temperature'),
##('press_abs','press_abs'),
##('gyro_cal_z','gyro_cal_z'),
##('gyro_cal_y','gyro_cal_y'),
##('gyro_cal_x','gyro_cal_x'),
##('raw_temp','raw_temp'),
##('mag_ofs_z','mag_ofs_z'),
##('mag_ofs_x','mag_ofs_x'),
##('mag_ofs_y','mag_ofs_y'),
##('accel_cal_y','accel_cal_y'),
##('raw_press','raw_press'),
##('accel_cal_x','accel_cal_x'),
##('mag_declination','mag_declination'),
##('mavpackettype','mavpackettype'),
##('accel_cal_z','accel_cal_z'),
##('servo4_raw','servo4_raw'),
##('servo2_raw','servo2_raw'),
##('servo6_raw','servo6_raw'),
##('time_usec','time_usec'),
##('servo1_raw','servo1_raw'),
##('servo8_raw','servo8_raw'),
##('servo5_raw','servo5_raw'),
##('mavpackettype','mavpackettype'),
##('servo3_raw','servo3_raw'),
##('port','port'),
##('servo7_raw','servo7_raw'),
##('chan4_raw','chan4_raw'),
##('chan2_raw','chan2_raw'),
##('chan6_raw','chan6_raw'),
##('time_boot_ms','time_boot_ms'),
##('chan1_raw','chan1_raw'),
##('chan5_raw','chan5_raw'),
##('chan3_raw','chan3_raw'),
##('chan7_raw','chan7_raw'),
##('mavpackettype','mavpackettype'),
##('chan8_raw','chan8_raw'),
##('port','port'),
##('rssi','rssi'),
##('error_rp','error_rp'),
##('error_yaw','error_yaw'),
##('renorm_val','renorm_val'),
##('accel_weight','accel_weight'),
##('omegaIx','omegaIx'),
##('omegaIy','omegaIy'),
##('mavpackettype','mavpackettype'),
##('omegaIz','omegaIz'),
##('I2Cerr','I2Cerr'),
##('mavpackettype','mavpackettype'),
##('Vcc','Vcc'),
##('custom_mode','custom_mode'),
##('system_status','system_status'),
##('base_mode','base_mode'),
##('autopilot','autopilot'),
##('mavpackettype','mavpackettype'),
##('type','type'),
##('mavlink_version','mavlink_version'),
##('mavpackettype','mavpackettype'),
##('target_component','target_component'),
##('target_system','target_system'),
##('param_index','param_index'),
##('param_count','param_count'),
##('param_type','param_type'),
##('param_id','param_id'),
##('mavpackettype','mavpackettype'),
##('param_value','param_value'),
##('req_stream_id','req_stream_id'),
##('req_message_rate','req_message_rate'((
##('target_system','target_system'),
##('start_stop','start_stop'),
##('mavpackettype','mavpackettype'),
##('target_component','target_component'),
##('mavpackettype','mavpackettype'),
##('severity','severity'),
##('text','text'),
##('satellite_snr','satellite_snr'),
##('satellite_azimuth','satellite_azimuth'),
##('satellite_prn','satellite_prn'),
##('satellite_elevation','satellite_elevation'),
##('satellites_visible','satellites_visible'),
##('satellite_used','satellite_used'),
##('mavpackettype','mavpackettype'),
##('yawspeed','yawspeed'),
##('roll','roll'),
##('throttle','throttle'),
##('groundspeed','groundspeed'),
##('airspeed','airspeed'),
##('climb','climb'),
##('mavpackettype','mavpackettype'),
##('alt','alt'),
##('heading','heading'),
##('onboard_control_sensors_present','onboard_control_sensors_present'),
##('load','load'),
##('battery_remaining','battery_remaining'),
##('errors_count4','errors_count4'),
##('drop_rate_comm','drop_rate_comm'),
##('errors_count2','errors_count2'),
##('errors_count3','errors_count3'),
##('errors_comm','errors_comm'),
##('current_battery','current_battery'),
##('errors_count1','errors_count1'),
##('onboard_control_sensors_health','onboard_control_sensors_present'),
##('mavpackettype','mavpackettype'),
##('onboard_control_sensors_enabled','onboard_control_sensors_present'),
##('voltage_battery','voltage_battery'),
##('mavpackettype','mavpackettype'),
##('brkval','brkval'),
##('freemem','freemem'),
##('mavpackettype','mavpackettype'),
##('seq','seq'),
##('fix_type','fix_type'),
##('cog','cog'),
##('epv','epv'),
##('lon','lon'),
##('time_usec','time_usec'),
##('eph','eph'),
##('satellites_visible','satellites_visible'),
##('lat','lat'),
##('mavpackettype','mavpackettype'),
##('alt','alt'),
##('vel','vel'),
##('wp_dist','wp_dist'),
##('nav_pitch','nav_pitch'),
##('target_bearing','target_bearing'),
##('nav_roll','nav_roll'),
##('aspd_error','aspd_error'),
##('alt_error','alt_error'),
##('mavpackettype','mavpackettype'),
##('xtrack_error','xtrack_error'),
##('nav_bearing','nav_bearing'),
##('xgyro','xgyro'),
##('zmag','zmag'),
##('ygyro','ygyro'),
##('xmag','xmag'),
##('zacc','zacc'),
##('xacc','xacc'),
##('yacc','yacc'),
##('zgyro','zgyro'),
##('mavpackettype','mavpackettype'),
##('ymag','ymag'),
##('time_usec','time_usec'),
##('mavpackettype','mavpackettype'),
##('press_diff','press_diff'),
##('time_boot_ms','time_boot_ms'),
##('temperature','temperature'),
##('press_abs','press_abs'),
##('gyro_cal_z','gyro_cal_z'),
##('gyro_cal_y','gyro_cal_y'),
##('gyro_cal_x','gyro_cal_x'),
##('raw_temp','raw_temp'),
##('mag_ofs_z','mag_ofs_z'),
##('mag_ofs_x','mag_ofs_x'),
##('mag_ofs_y','mag_ofs_y'),
##('accel_cal_y','accel_cal_y'),
##('raw_press','raw_press'),
##('accel_cal_x','accel_cal_x'),
##('mag_declination','mag_declination'),
##('mavpackettype','mavpackettype'),
##('accel_cal_z','accel_cal_z'),
##('servo4_raw','servo4_raw'),
##('servo2_raw','servo2_raw'),
##('servo6_raw','servo6_raw'),
##('time_usec','time_usec'),
##('servo1_raw','servo1_raw'),
##('servo8_raw','servo8_raw'),
##('servo5_raw','servo5_raw'),
##('mavpackettype','mavpackettype'),
##('servo3_raw','servo3_raw'),
##('port','port'),
##('servo7_raw','servo7_raw'),
##('chan4_raw','chan4_raw'),
##('chan2_raw','chan2_raw'),
##('chan6_raw','chan6_raw'),
##('time_boot_ms','time_boot_ms'),
##('chan1_raw','chan1_raw'),
##('chan5_raw','chan5_raw'),
##('chan3_raw','chan3_raw'),
##('chan7_raw','chan7_raw'),
##('mavpackettype','mavpackettype'),
##('chan8_raw','chan8_raw'),
##('port','port'),
##('rssi','rssi'),
##('error_rp','error_rp'),
##('error_yaw','error_yaw'),
##('renorm_val','renorm_val'),
##('accel_weight','accel_weight'),
##('omegaIx','omegaIx'),
##('omegaIy','omegaIy'),
##('mavpackettype','mavpackettype'),
##('omegaIz','omegaIz'),
##('I2Cerr','I2Cerr'),
##('mavpackettype','mavpackettype'),
##('Vcc','Vcc'),
##('custom_mode','custom_mode'),
##('system_status','system_status'),
##('base_mode','base_mode'),
##('autopilot','autopilot'),
##('mavpackettype','mavpackettype'),
##('type','type'),
##('mavlink_version','mavlink_version'),
##('mavpackettype','mavpackettype'),
##('target_component','target_component'),
##('target_system','target_system'),
##('param_index','param_index'),
##('param_count','param_count'),
##('param_type','param_type'),
##('param_id','param_id'),
##('mavpackettype','mavpackettype'),
##('param_value','param_value'),
##('req_stream_id','req_stream_id'),
##('req_message_rate','req_message_rate'),
##('target_system','target_system'),
##('start_stop','start_stop'),
##('mavpackettype','mavpackettype'),
##('target_component','target_component'),
##('mavpackettype','mavpackettype'),
##('severity','severity'),
##('text','text'),
##('satellite_snr','satellite_snr'),
##('satellite_azimuth','satellite_azimuth'),
##('satellite_prn','satellite_prn'),
##('satellite_elevation','satellite_elevation'),
##('satellites_visible','satellites_visible'),
##('satellite_used','satellite_used'),
##('mavpackettype''mavpackettype'),
##('zacc','zacc'),
##('xacc','xacc'),
##('yacc','yacc'),
##('zgyro','zgyro'),
##('mavpackettype','mavpackettype'),
##('ymag','ymag'),
##('time_usec','time_usec'),
##('mavpackettype','mavpackettype'),
##('press_diff','press_diff'),
##('time_boot_ms','time_boot_ms'),
##('temperature','temperature'),
##('press_abs','press_abs'),
##('gyro_cal_z','gyro_cal_z'),
##('gyro_cal_y','gyro_cal_y'),
##('gyro_cal_x','gyro_cal_x'),
##('raw_temp','raw_temp'),
##('mag_ofs_z','mag_ofs_z'),
##('mag_ofs_x','mag_ofs_x'),
##('mag_ofs_y','mag_ofs_y'),
##('accel_cal_y','accel_cal_y'),
##('raw_press','raw_press'),
##('accel_cal_x','accel_cal_x'),
##('mag_declination','mag_declination'),
##('mavpackettype','mavpackettype'),
##('accel_cal_z','accel_cal_z'),
##('servo4_raw','servo4_raw'),
##('servo2_raw','servo2_raw'),
##('servo6_raw','servo6_raw'),
##('time_usec','time_usec'),
##('servo1_raw','servo1_raw'),
##('servo8_raw','servo8_raw'),
##('servo5_raw','servo5_raw'),
##('mavpackettype','mavpackettype'),
##('servo3_raw','servo3_raw'),
##('port','port'),
##('servo7_raw','servo7_raw'),
##('chan4_raw','chan4_raw'),
##('chan2_raw','chan2_raw'),
##('chan6_raw','chan6_raw'),
##('time_boot_ms','time_boot_ms'),
##('chan1_raw','chan1_raw'),
##('chan5_raw','chan5_raw'),
##('chan3_raw','chan3_raw'),
##('chan7_raw','chan7_raw'),
##('mavpackettype','mavpackettype'),
##('chan8_raw','chan8_raw'),
##('port','port'),
##('rssi','rssi'),
##('error_rp','error_rp'),
##('error_yaw','error_yaw'),
##('renorm_val','renorm_val'),
##('accel_weight','accel_weight'),
##('omegaIx','omegaIx'),
##('omegaIy','omegaIy'),
##('mavpackettype','mavpackettype'),
##('omegaIz','omegaIz'),
##('I2Cerr','I2Cerr'),
##('mavpackettype','mavpackettype'),
##('Vcc','Vcc'),
##('custom_mode','custom_mode'),
##('system_status','system_status'),
##('base_mode','base_mode'),
##('autopilot','autopilot'),
##('mavpackettype','mavpackettype'),
##('type','type'),
##('mavlink_version','mavlink_version'),
##('mavpackettype','mavpackettype'),
##('target_component','target_component'),
##('target_system','target_system'),
##('param_index','param_index'),
##('param_count','param_count'),
##('param_type','param_type'),
##('param_id','param_id'),
##('mavpackettype','mavpackettype'),
##('param_value','param_value'),
##('req_stream_id','req_stream_id'),
##('req_message_rate','req_message_rate'),
##('target_system','target_system'),
##('start_stop','start_stop'),
##('mavpackettype','mavpackettype'),
##('target_component','target_component'),
##('mavpackettype','mavpackettype'),
##('severity','severity'),
##('text','text'),
##('satellite_snr','satellite_snr'),
##('satellite_azimuth','satellite_azimuth'),
##('satellite_prn','satellite_prn'),
##('satellite_elevation','satellite_elevation'),
##('satellites_visible','satellites_visible'),
##('satellite_used','satellite_used'),
##('mavpackettype','mavpackettype'))

class Flight(models.Model):
    pilot=models.ForeignKey(User)
    logfile=models.FileField(blank=False, upload_to='logs')
    start=models.DateTimeField(blank=False)
    comments=models.TextField(blank=False)
    video=models.URLField(blank=False, verify_exists=True)

    def battVlts(self):
        pass
        #return (timestamps, voltages)

    def throttle(self):
        pass
        #return (timestamps, voltages)

class MavMessage(models.Model):
    msgType=models.CharField(max_length=40, choices=MSG_TYPES)
    timestamp=models.DateTimeField()
    flight=models.ForeignKey('Flight')
    
class MavDatum(models.Model):
    message=models.ForeignKey('MavMessage')
    msgField=models.CharField(max_length=40)
    value=models.FloatField()
    
